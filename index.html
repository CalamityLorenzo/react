<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>React extensions for Elmish apps
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Elmish React extensions"/>
    <meta name="author" content="Eugene Tolmachev"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="https://elmish.github.io/react/content/style_light.css" />
    <script type="text/javascript" src="https://elmish.github.io/react/content/tips.js"></script>
    <style>span.l { display: none }</style>
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="https://elmish.github.io">elmish</a></li>
          <li><a href="http://fable.io">fable</a></li>
          <li><a href="http://fsharp.org">fsharp.org</a></li>
        </ul>
        <h3 class="muted"><a href="https://elmish.github.io/react/index.html">elmish-react</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="React-extensions-for-Elmish-apps" class="anchor" href="#React-extensions-for-Elmish-apps">React extensions for Elmish apps</a></h1>
<p>Elmish-React implements boilerplate to wire up the rendering of React and React Native components and several rendering optimization functions.</p>
<h2><a name="Installation" class="anchor" href="#Installation">Installation</a></h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="shell">paket add nuget Fable.Elmish.React
</code></pre></td></tr></table>
<p>You also need to install React:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="shell">yarn add react react-dom
</code></pre></td></tr></table>
<h2><a name="Program-module-extensions" class="anchor" href="#Program-module-extensions">Program module extensions</a></h2>
<p>Both React and React Native applications need a root component to be rendered at the specified placeholder, see
<a href="./browser.html">browser</a> and <a href="./native.html">native</a> tutorials for details.</p>
<h2><a name="Lazy-views" class="anchor" href="#Lazy-views">Lazy views</a></h2>
<p>By default, every time the main update function is called (upon receiving and processing a message), the entire DOM is constructed anew and passed to React for <a href="https://reactjs.org/docs/reconciliation.html">reconciliation</a>.
If there are no changes in the model of some component, its view function will under normal circumstances not return a different result. React will then still perform reconciliation and realize that there is no need to update the component's UI.
Consequently, when the DOM is sufficiently large or its construction extremely time-consuming, this unnecessary work may have noticeable repercussions in terms of application performance.
Thanks to lazy views however, the update process can be optimized by avoiding DOM reconciliation and construction steps, but only if the model remains unchanged.</p>
<p><code>lazyView</code> can be used with equatable models (most F# core types: records, tuples, etc).</p>
<p><code>lazyViewWith</code> can be used with types that don't implement the <code>equality</code> constraint (such as types/instances coming from JS libraries) by passing the custom <code>equal</code> function that compares the previous and the new model.</p>
<p>These functions work for both React and React Native views. They are used in the following way.</p>
<p>Given a view function of one argument:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs6', 25)" onmouseover="showTip(event, 'fs6', 25)" class="i">Elmish</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 26)" onmouseover="showTip(event, 'fs17', 26)" class="i">React</span>

<span class="c">// val view : &#39;a -&gt; ReactElement</span>
<span onmouseout="hideTip(event, 'fs18', 27)" onmouseover="showTip(event, 'fs18', 27)" class="f">lazyView</span> <span onmouseout="hideTip(event, 'fs1', 28)" onmouseover="showTip(event, 'fs1', 28)" class="i">view1</span> <span onmouseout="hideTip(event, 'fs11', 29)" onmouseover="showTip(event, 'fs11', 29)" class="i">model</span>

<span class="c">// or given a typical view function, defined like this:</span>
<span class="c">// val view : &#39;a -&gt; Dispatch&lt;&#39;msg&gt; -&gt; ReactElement</span>
<span onmouseout="hideTip(event, 'fs18', 30)" onmouseover="showTip(event, 'fs18', 30)" class="f">lazyView2</span> <span onmouseout="hideTip(event, 'fs4', 31)" onmouseover="showTip(event, 'fs4', 31)" class="i">view2</span> <span onmouseout="hideTip(event, 'fs11', 32)" onmouseover="showTip(event, 'fs11', 32)" class="i">model</span> <span onmouseout="hideTip(event, 'fs15', 33)" onmouseover="showTip(event, 'fs15', 33)" class="i">dispatch</span>
</code></pre></td>
</tr>
</table>
<p>the rendered view will be cached for as long as <code>model</code> remains the same.</p>
<p>Given a view function of three arguments:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// val view : &#39;a -&gt; &#39;b -&gt; Dispatch&lt;&#39;msg&gt; -&gt; ReactElement</span>
<span onmouseout="hideTip(event, 'fs18', 34)" onmouseover="showTip(event, 'fs18', 34)" class="f">lazyView3</span> <span onmouseout="hideTip(event, 'fs7', 35)" onmouseover="showTip(event, 'fs7', 35)" class="i">view3</span> <span onmouseout="hideTip(event, 'fs13', 36)" onmouseover="showTip(event, 'fs13', 36)" class="i">model1</span> <span onmouseout="hideTip(event, 'fs14', 37)" onmouseover="showTip(event, 'fs14', 37)" class="i">model2</span> <span onmouseout="hideTip(event, 'fs15', 38)" onmouseover="showTip(event, 'fs15', 38)" class="i">dispatch</span>
</code></pre></td>
</tr>
</table>
<p>Elmish-React will skip calling the <code>view3</code> for as long as both <code>model1</code> and <code>model2</code> remain unmodified.</p>

<div class="tip" id="fs1">val view1 : model:&#39;a -&gt; &#39;b<br /><br />Full name: Index.view1</div>
<div class="tip" id="fs2">val model : &#39;a</div>
<div class="tip" id="fs3">val failwith : message:string -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Operators.failwith</div>
<div class="tip" id="fs4">val view2 : model:&#39;a -&gt; dispatch:&#39;b -&gt; &#39;c<br /><br />Full name: Index.view2</div>
<div class="tip" id="fs5">val dispatch : &#39;b</div>
<div class="tip" id="fs6">namespace Elmish</div>
<div class="tip" id="fs7">val view3 : model1:&#39;a -&gt; model2:&#39;b -&gt; dispatch:&#39;c -&gt; &#39;d<br /><br />Full name: Index.view3</div>
<div class="tip" id="fs8">val model1 : &#39;a</div>
<div class="tip" id="fs9">val model2 : &#39;b</div>
<div class="tip" id="fs10">val dispatch : &#39;c</div>
<div class="tip" id="fs11">val model : string option<br /><br />Full name: Index.model</div>
<div class="tip" id="fs12">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs13">val model1 : int option<br /><br />Full name: Index.model1</div>
<div class="tip" id="fs14">val model2 : float option<br /><br />Full name: Index.model2</div>
<div class="tip" id="fs15">val dispatch : obj<br /><br />Full name: Index.dispatch</div>
<div class="tip" id="fs16">type unit = Unit<br /><br />Full name: Microsoft.FSharp.Core.unit</div>
<div class="tip" id="fs17">namespace Elmish.React</div>
<div class="tip" id="fs18"></div>

        </div>
        <div class="span3">
          <img src="https://elmish.github.io/react/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">elmish-react</li>
            <li><a href="https://github.com/elmish/react">Source Code on GitHub</a></li>
            <li class="nav-header">Quick start</li>
            <li><a href="https://elmish.github.io/react/browser.html">Browser SPA</a></li>
            <li><a href="https://elmish.github.io/react/native.html">Native App</a></li>
            <li class="nav-header">Modules</li>
            <li><a href="https://elmish.github.io/react/common.html">Common</a></li>
            <li><a href="https://elmish.github.io/react/react.html">React</a></li>
            <li><a href="https://elmish.github.io/react/react-native.html">ReactNative</a></li>
          </ul>
        </div>
      </div>
    </div>
  </body>
  </html>
